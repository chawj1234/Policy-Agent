# Policy Navigator Agent

## 프로젝트 개요
정부 정책 문서를 개인 맞춤형 행동 가이드로 변환하는 AI Agent 프로토타입입니다. 입력된 사용자 프로필과 정책 문서를 바탕으로 실행 가능한 행동 플랜과 추가 질문을 생성합니다.

## 왜 Agent인가
정책 문서는 조건과 예외가 많고, 사용자는 자신의 상황에 맞는 "다음 행동"이 필요합니다. Agent는 판단(조건 검증) → 계획(선택지 구성) → 검증(피드백 루프) 흐름을 통해 실제 신청 가능성 중심의 행동 가이드를 제공합니다.

## Agent 흐름 다이어그램(ASCII)
```
[입력 프로필/정책 문서]
          |
          v
[Document Parse] -> (필요 시)
          |
          v
[Solar Plan 단계] -> (조건 분석, 질문 생성)
          |
          v
[Interactive] -> (질문 있으면 사용자 입력 받고 프로필 업데이트)
          |
          v
[Solar Final 단계] -> (최종 행동 가이드 생성)
          |
          v
[판단/선택지/시뮬레이션/추천 행동/추가 질문]
```

## Upstage 제품 역할 분리
- Solar: 오케스트레이터(판단/계획/검증), 최종 행동 가이드 생성
- Document Parse: PDF 문서 파싱(텍스트/구조 추출)
- Information Extract: 정책 요건/혜택/제출서류 등 핵심 정보 추출

정책 문서는 정형 스키마가 고정되지 않으므로, 기본적으로 Solar 기반 의미 추론을 사용하고 IE는 정형 문서 데모 시에만 사용합니다.

## 데모 시나리오(20대 청년)
- 입력: "29세/수도권/중소기업/월250/미혼"
- 정책 문서: 청년 주거·취업 지원 패키지(샘플 텍스트 또는 PDF)
- 출력: 월세지원/직무교육/구직활동비 등 선택지와 신청 단계

## 출력 예시
```
[판단 요약]
- 현재 프로필 기준으로 청년 주거·취업 지원 패키지 일부 항목에 해당 가능성이 높음
- 소득 기준과 거주 요건 증빙이 핵심

[선택지]
1) 월세 지원(12개월)
2) 직무교육 바우처(1회)
3) 구직활동비(6개월)

[시뮬레이션]
- 월세 지원 선택 시: 월 20만원 x 12개월 = 240만원 절감
- 구직활동비 선택 시: 월 10만원 x 6개월 = 60만원 확보

[추천 행동]
- 정부24 회원가입 및 본인인증 완료
- 주민등록등본, 소득증빙 서류 사전 발급
- 교육 바우처 과정 리스트 확인 후 1순위 선택

[추가 질문]
- 최근 3개월 소득 변동이 있나요?
- 현재 거주 형태(월세/전세/자가)는 무엇인가요?
```

## 실행 방법
```
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python src/main.py --pdf data/sample_policy.pdf --profile "29세/수도권/중소기업/월250/미혼"
```

- PDF 파일이 없으면 `--pdf` 없이 실행 가능합니다.
- 이 경우 내장된 샘플 정책 텍스트를 사용합니다.

### Interactive 모드
```
python src/main.py --profile "29세/수도권/중소기업/월250/미혼" --interactive
```

Interactive 모드는 질문이 여러 개면 **한 질문씩 입력**받습니다.
각 질문의 `field`를 기준으로 `field: 답변` 형태로 프로필이 보강됩니다.

## MOCK_MODE 안내
- `.env`에서 `MOCK_MODE=true`로 설정하면 실제 API 호출 없이 데모가 동작합니다.
- API 키가 없어도 `python src/main.py --profile "29세/수도권/중소기업/월250/미혼"` 실행이 가능합니다.

## .env 예시
```
UPSTAGE_API_KEY=up_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
UPSTAGE_BASE_URL=https://api.upstage.ai/v1
SOLAR_MODEL=solar-pro2
MOCK_MODE=false
```

## 교육 콘텐츠 확장 가능성
- 정책 문서를 과제/케이스 스터디로 변환
- 행동 가이드 기반 체크리스트/퀴즈 생성
- 개인 맞춤형 피드백 루프 설계
